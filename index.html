<!DOCTYPE html>
<html prefix="og: https://ogp.me/ns#">

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-13YC9Q2MY4"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-13YC9Q2MY4');
    </script>
    <title>BananoFaucet</title>
    <link rel="stylesheet" href="styles/index.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <meta name="theme-color" content="#FBDD11">
    <link rel="icon" type="image/png" href="https://banano.cc/assets/logo.png" />
    <meta property="image" content="https://banano.cc/assets/logo.png">
    <meta name="keywords" content="banano, banano faucet, free banano">
    <meta name="author" content="MiranDaniel">
    <meta name="description" content="Get free Banano, every week!">
    <meta property="og:image" content="https://banano.cc/assets/logo.png">
    <meta property="og:thumbnail" content="https://banano.cc/assets/logo.png">
</head>

<body>
    <header class="center">
        <div id="hdr">
            <img src="images/banano2.svg" id="logo">
            <h1 id="title">
                BananoFaucet
            </h1>
        </div>
    </header>
    <hr>
    <div class="center">
        <p id="rate">
            This faucet can be used once every 7 days
        </p>
        <!--<div class="center">
            <div id="req">
                <h3 id="reqh">REQUIREMENTS:</h3>
                <p id="reqt">
                    Reddit account made before 2021-01-14
                </p>
            </div>
            <div id="req">
                <h3 id="reqh">RULES:</h3>
                <p id="reqt">
                    Your karma needs to have been gained by meaningfully contributing to the community. Vote manipulation and karma begging is not allowed.
                    <a id="creeper"
                    href="https://www.reddit.com/r/BananoFaucet/comments/n6ve4i/bananofaucet_karma_rules_please_read/">Full rules</a>
                </p>
            </div>
        </div>-->


    </div>

    <div class="t">
        <div class="center">
            <div class="m" id="notification"></div>
            <form action="?" method="POST" id="cap">
                <div class="g-recaptcha" data-sitekey="6LeZ7yYaAAAAAP3ZKDy3Nsn3jLbgQOZWPzUfIcdH" data-callback="verify"
                    id="g-recaptcha" data-theme="dark">
                </div>
                <br />
            </form>

            <div class="forms">
                <form id="reddit">
                    <label for="faddr">Banano Address</label><br>
                    <input type="text" id="faddr" class="inp"><br>
                    <!--<div id="rules">
                        <input type="checkbox" id="rulesBox" name="rulesBox">
                        <label for="rulesBox">I read the rules and I agree to them</label><br>
                    </div>-->
                </form>

                <div id="btnDIV"><button type="button" id="btn" onclick="send()">Send</button></div>
            </div>
        </div>
        <div class="center">
            <table id="info" class="center">
                <tr>
                    <th>Faucet balance</th>
                    <!--<th>Uses left</th>-->
                    <!--<th>Faucet reward</th>-->
                </tr>
                <tr>
                    <td id="infaucet">Loading</td>
                    <!--<td id="uses">Loading</td>-->
                    <!--<td id="reward">Loading</td>-->
                </tr>
            </table>
            <div class="center" id="creeper">
                <a id="creeper"
                    href="https://creeper.banano.cc/explorer/account/ban_1faucetjuiyuwnz94j4c7s393r95sk5ac7p5usthmxct816osgqh3qd1caet/history">View
                    on Creeper</a>
            </div>
            <br>
            <!--<div id="rep" style="margin-top: 25px;">
                <h4 id="reqh">BananoFaucet is a representative!</h4>
                <p id="reqt" style="padding-left: 10px; padding-right: 10px;">
                    Choosing a representative with low voting weight and high uptime helps secure the network through decentralization. This will help make the banano network become more secure as one (or a few) parties won't control which blocks are valid.
                    <br>
                    <br>
                    <a id="creeper"
                    href="https://hatebin.com/pgrckulgdg">How to switch on Kalium</a><br>
                    <a id="creeper"
                    href="http://vault.banano.co.in/representatives">How to switch on BananoVault</a><br>
                    <a id="creeper"
                    href="https://banano.nault.cc/representatives">How to switch on Nault</a>
                </p>
            </div>-->


        </div>
    </div>
    <footer class="center">
        <hr>
        <div id="ftr">
            <p id="sup">Created by MiranDaniel | Support me:</p>
            <br>
            <p id="addr">ban_1aws637mb3qnuf9j8swzufq3nj3fttuzkixbd817nmmhyms6a6kt1zyptq87</p>
        </div>
    </footer>

</body>

<script src="https://www.google.com/recaptcha/api.js"></script>
<script>
console.log("Copyright Â© MiranDaniel, 2020-2021 All rights reserved");
console.log("All files and information contained in this repository are copyright by MiranDaniel, and may not be duplicated, copied, modified or adapted, in any way without our written permission.");
console.log("Our Content, as found within our Website, Repository and Services, is protected under United States and foreign copyrights. The copying, redistribution, use or publication by you of any such Content, is strictly prohibited. Your use of our Website and Services does not grant you any ownership rights to our Content.");
    function lzw_encode(s) {
        var dict = {};
        var data = (s + "").split("");
        var out = [];
        var currChar;
        var phrase = data[0];
        var code = 256;
        for (var i = 1; i < data.length; i++) {
            currChar = data[i];
            if (dict[phrase + currChar] != null) {
                phrase += currChar;
            }
            else {
                out.push(phrase.length > 1 ? dict[phrase] : phrase.charCodeAt(0));
                dict[phrase + currChar] = code;
                code++;
                phrase = currChar;
            }
        }
        out.push(phrase.length > 1 ? dict[phrase] : phrase.charCodeAt(0));
        for (var i = 0; i < out.length; i++) {
            out[i] = String.fromCharCode(out[i]);
        }
        return out.join("");
    }
    var caesarShift = function (str, amount) {
        if (amount < 0) {
            return caesarShift(str, amount + 26);
        }

        var output = "";

        for (var i = 0; i < str.length; i++) {
            var c = str[i];

            if (c.match(/[a-z]/i)) {
                var code = str.charCodeAt(i);

                if (code >= 65 && code <= 90) {
                    c = String.fromCharCode(((code - 65 + amount) % 26) + 65);
                }

                else if (code >= 97 && code <= 122) {
                    c = String.fromCharCode(((code - 97 + amount) % 26) + 97);
                }
            }

            output += c;
        }

        return output;
    };
    function verify() {
        if (grecaptcha && grecaptcha.getResponse().length > 0) {
            console.log("K");
            document.getElementById("faddr").disabled = false;
            document.getElementById("btn").disabled = false;
        }
    }

    function send() {
        if (grecaptcha && grecaptcha.getResponse().length > 0) {
            if (document.getElementById("faddr").value.toLowerCase().startsWith("ban_") === false) {
                alert("This is not a valid Banano address")
                return;
            }
            if (document.getElementById("faddr").value.length != 64) {
                alert("This is not a valid Banano address")
                return;
            }
            //if (document.getElementById('rulesBox').checked) {
            //    console.log("OK");
            //} else {
            //    alert("You need to read and agree to the rules first");
            //}
            var str = `Please send me some Banano.%0A
Address: \`${document.getElementById("faddr").value}\`%0A
Press send to get your reward. (If the send button is grayed out, add a new character to the message, then remove it)%0A
%0A
%0A
--CODE-START--%0A
${lzw_encode(grecaptcha.getResponse())}%0A
--CODE-END--
`
            console.log(str);
            window.location.href = "https://www.reddit.com/message/compose/?to=r/BananoFaucet&subject=BananoFaucet&message=" + str;
        }
        else {
            document.getElementById("faddr").disabled = true;
            document.getElementById("btn").disabled = true;
        }
    }


</script>
<script>
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "https://kaliumapi.appditto.com/api", true);
    xhr.setRequestHeader('Content-Type', 'application/json');
    xhr.send(JSON.stringify({
        action: "account_balance",
        account: "ban_1faucetjuiyuwnz94j4c7s393r95sk5ac7p5usthmxct816osgqh3qd1caet"
    }));
    xhr.onload = function () {
        var data = JSON.parse(this.responseText);
        if (data.balance / Math.pow(10, 29) < 26) { //11
            document.getElementById("faddr").disabled = true;
            document.getElementById("btn").disabled = true;
            //document.getElementById("rulesBox").disabled = true;

            document.getElementById("infaucet").style.color = "red";
            document.getElementById("uses").style.color = "red";
            document.getElementById("reward").style.color = "red";
            var element = document.getElementById("g-recaptcha");
            element.classList.add("disabled-element");
            document.getElementById("notification").innerHTML = "The faucet is empty, please come back later."; //The faucet is empty, please come back later.
        }
        document.getElementById("infaucet").innerHTML = `${Math.round(data.balance / Math.pow(10, 29))} BAN`;
        document.getElementById("uses").innerHTML = `${Math.round(data.balance / Math.pow(10, 29) / 10)}`;
        document.getElementById("reward").innerHTML = `10 BAN`;
    };
</script>
<script>

</script>
<script>
document.getElementById("notification").innerHTML = "The faucet is currently under maintenance.<br>Rewards will be sent later.";
    function text(url) {
        return fetch(url).then(res => res.text());
    }

    var ip;
    function readTextFile(file) {
        var rawFile = new XMLHttpRequest();
        rawFile.open("GET", file, true);
        rawFile.onreadystatechange = function () {
            if (rawFile.readyState === 4) {
                if (rawFile.status === 200 || rawFile.status == 0) {

                    text('https://www.cloudflare.com/cdn-cgi/trace').then(data => {
                        let ipRegex = /[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}/
                        ip = data.match(ipRegex)[0];
                        var allText = rawFile.responseText.split("\n");
                        console.log(allText);
                        console.log(ip);
                        if (allText.includes(ip) === true) {
                            document.getElementById("notification").innerHTML = "Connections from the Tor network are tempoarily banned to prevent abuse";
                            document.getElementById("faddr").disabled = true;
                            document.getElementById("btn").disabled = true;

                            document.getElementById("infaucet").style.color = "red";
                            document.getElementById("uses").style.color = "red";
                            document.getElementById("reward").style.color = "red";
                            var element = document.getElementById("g-recaptcha");
                            element.classList.add("disabled-element");
                        }
                    });
                }
            }
        }
        rawFile.send(null);
    }
    readTextFile("tor.t");


document.body.innerHTML = document.body.innerHTML.replace('I\'m not a robot', 'I\'m a good monkey');
</script>


</html>
